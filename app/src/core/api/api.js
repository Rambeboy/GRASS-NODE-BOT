const _0x8616a=_0xa6fb;function _0xa6fb(_0x1ed6b6,_0x4ee90c){const _0x522b5b=_0x522b();return _0xa6fb=function(_0xa6fb7f,_0x38a956){_0xa6fb7f=_0xa6fb7f-0x135;let _0x172669=_0x522b5b[_0xa6fb7f];return _0x172669;},_0xa6fb(_0x1ed6b6,_0x4ee90c);}function _0x522b(){const _0x200d0c=['includes','content-type','Authorization','?????','https://app.getgrass.io/','Detect\x20API\x20Change\x20Stopping\x20bot','proxy','error','text','agent','1863690EidNJA','fetch','ipChecker','startsWith','forEach','782628BaykOw','Checking\x20IP','u=1,\x20i','658005mvDZik','Error\x20fetching\x20IP\x20data:','https://api.ipify.org/?format=json','headers','en-US,en;q=0.9,id;q=0.8','response','socks','info','generateHeaders','body','url','Request\x20Body\x20:\x20','1771931fuuMVv','81685WXseui','data','userAgent','IP\x20Checked','407448qGjVTy','456KAVpoH','statusText','stringify','isArray','2cZDylX','json','http','replace','replaceSensitiveData','Response\x20:\x20','GET','application/json','empty','status','something','application/json,\x20text/plain,\x20*/*','58257MsxzES','cors','desktop'];_0x522b=function(){return _0x200d0c;};return _0x522b();}(function(_0x1f9410,_0x5388a0){const _0x4c23d3=_0xa6fb,_0x31b199=_0x1f9410();while(!![]){try{const _0x4ebe4e=parseInt(_0x4c23d3(0x151))/0x1*(parseInt(_0x4c23d3(0x15a))/0x2)+-parseInt(_0x4c23d3(0x155))/0x3+parseInt(_0x4c23d3(0x141))/0x4+-parseInt(_0x4c23d3(0x144))/0x5+parseInt(_0x4c23d3(0x13c))/0x6+parseInt(_0x4c23d3(0x150))/0x7+-parseInt(_0x4c23d3(0x156))/0x8*(parseInt(_0x4c23d3(0x166))/0x9);if(_0x4ebe4e===_0x5388a0)break;else _0x31b199['push'](_0x31b199['shift']());}catch(_0x575901){_0x31b199['push'](_0x31b199['shift']());}}}(_0x522b,0x31fa8));import{HttpsProxyAgent}from'https-proxy-agent';import _0x5a3500 from'node-fetch';import _0x56adb5 from'../../utils/logger.js';import{SocksProxyAgent}from'socks-proxy-agent';import _0x3f47fb from'user-agents';export class API{constructor(_0x1aa1dc,_0x4fee30){const _0x25b8f9=_0xa6fb;this[_0x25b8f9(0x14e)]=_0x1aa1dc,this[_0x25b8f9(0x138)]=_0x4fee30,this['ua']=new _0x3f47fb({'deviceCategory':_0x25b8f9(0x168)})[_0x25b8f9(0x152)][_0x25b8f9(0x153)],this['IP']='-';}[_0x8616a(0x14c)](_0xe54829=undefined){const _0x37738c=_0x8616a,_0x1064fd={'Accept':'*/*','Content-Type':_0x37738c(0x161),'User-Agent':this['ua'],'sec-fetch-dest':_0x37738c(0x162),'sec-fetch-mode':_0x37738c(0x167),'sec-fetch-site':'same-site'};return _0xe54829&&(_0x1064fd[_0x37738c(0x16b)]=_0xe54829),_0x1064fd;}[_0x8616a(0x15e)](_0x41bdef){const _0x1b850e=_0x8616a;if(this['something']){if(typeof this['something']==='string'){const _0x5a3884=new RegExp(this[_0x1b850e(0x164)],'g');return _0x41bdef[_0x1b850e(0x15d)](_0x5a3884,_0x1b850e(0x135));}else Array[_0x1b850e(0x159)](this[_0x1b850e(0x164)])&&this[_0x1b850e(0x164)][_0x1b850e(0x140)](_0x168c87=>{const _0x25e391=_0x1b850e,_0x244308=new RegExp(_0x168c87,'g');_0x41bdef=_0x41bdef['replace'](_0x244308,_0x25e391(0x135));});}return _0x41bdef;}async[_0x8616a(0x13e)](){const _0x45d515=_0x8616a;_0x56adb5[_0x45d515(0x14b)](_0x45d515(0x142));try{const _0x512dd1={'headers':{'accept':_0x45d515(0x165),'accept-language':_0x45d515(0x148),'priority':_0x45d515(0x143),'sec-ch-ua':this['ua']},'method':_0x45d515(0x160),'mode':_0x45d515(0x167)};if(this['proxy']){if(this[_0x45d515(0x138)][_0x45d515(0x13f)](_0x45d515(0x15c)))_0x512dd1[_0x45d515(0x13b)]=new HttpsProxyAgent(this[_0x45d515(0x138)]);else this[_0x45d515(0x138)]['startsWith'](_0x45d515(0x14a))&&(_0x512dd1[_0x45d515(0x13b)]=new SocksProxyAgent(this[_0x45d515(0x138)]));}const _0xbff3c8=await _0x5a3500(_0x45d515(0x146),_0x512dd1),_0x53cd7b=await _0xbff3c8[_0x45d515(0x15b)]();this['IP']=_0x53cd7b['ip'];}catch(_0x3b6068){console[_0x45d515(0x139)](_0x45d515(0x145),_0x3b6068);throw _0x3b6068;}_0x56adb5[_0x45d515(0x14b)](_0x45d515(0x154));}async[_0x8616a(0x13d)](_0x24e468,_0x451942,_0x13ac31,_0x2bfa45={},_0x1b65c3={},_0x4a5b89=![]){const _0x48ab73=_0x8616a,_0x1d3f6d=_0x4a5b89?_0x24e468:''+this[_0x48ab73(0x14e)]+_0x24e468;try{const _0x950088={...this[_0x48ab73(0x14c)](_0x13ac31),..._0x1b65c3},_0x1aefe5={'headers':_0x950088,'method':_0x451942,'referrer':_0x48ab73(0x136)};_0x56adb5['info'](_0x451942+'\x20:\x20'+this[_0x48ab73(0x15e)](_0x1d3f6d)+'\x20'+(this['proxy']?this[_0x48ab73(0x138)]:''));const _0x523a4c=_0x950088;for(let _0x4ea03e in _0x523a4c){_0x523a4c[_0x4ea03e]=this[_0x48ab73(0x15e)](_0x523a4c[_0x4ea03e]);}_0x56adb5[_0x48ab73(0x14b)]('Request\x20Header\x20:\x20'+JSON[_0x48ab73(0x158)](_0x523a4c));if(_0x451942!==_0x48ab73(0x160)){_0x1aefe5['body']=''+JSON[_0x48ab73(0x158)](_0x2bfa45);const _0x143ae2=this['replaceSensitiveData'](_0x1aefe5[_0x48ab73(0x14d)]);_0x56adb5['info'](_0x48ab73(0x14f)+_0x143ae2);}if(this[_0x48ab73(0x138)]){if(this[_0x48ab73(0x138)][_0x48ab73(0x13f)]('http'))_0x1aefe5['agent']=new HttpsProxyAgent(this['proxy']);if(this['proxy'][_0x48ab73(0x13f)](_0x48ab73(0x14a)))_0x1aefe5[_0x48ab73(0x13b)]=new SocksProxyAgent(this[_0x48ab73(0x138)]);}const _0x4efe9b=await _0x5a3500(_0x1d3f6d,_0x1aefe5);_0x56adb5['info'](_0x48ab73(0x15f)+_0x4efe9b[_0x48ab73(0x163)]+'\x20'+_0x4efe9b[_0x48ab73(0x157)]);if(_0x4efe9b['ok']){const _0x3a2225=_0x4efe9b[_0x48ab73(0x147)]['get'](_0x48ab73(0x16a));let _0x2bb646;_0x3a2225&&_0x3a2225[_0x48ab73(0x169)](_0x48ab73(0x161))?(_0x2bb646=await _0x4efe9b['json'](),_0x2bb646[_0x48ab73(0x163)]=_0x4efe9b[_0x48ab73(0x163)]):_0x2bb646={'status':_0x4efe9b[_0x48ab73(0x163)],'message':await _0x4efe9b[_0x48ab73(0x13a)]()};if(_0x4efe9b['ok'])_0x2bb646[_0x48ab73(0x163)]=0xc8;let _0x10f1fc=JSON[_0x48ab73(0x158)](_0x2bb646);return _0x10f1fc=this[_0x48ab73(0x15e)](_0x10f1fc),_0x56adb5['info']('Response\x20Data\x20:\x20'+_0x10f1fc),_0x2bb646;}else throw _0x4efe9b;}catch(_0x212542){_0x56adb5[_0x48ab73(0x139)](_0x212542);if(_0x212542[_0x48ab73(0x163)]){if(_0x212542['status']==0x194||_0x212542[_0x48ab73(0x163)]==0x1f7){console['error']('Detect\x20API\x20Change\x20Stopping\x20bot');throw Error(_0x48ab73(0x137));}throw Error(_0x212542['status']+'\x20-\x20'+_0x212542[_0x48ab73(0x157)]);}if(_0x212542[_0x48ab73(0x149)]){if(_0x212542['response'][_0x48ab73(0x163)]==0x194||_0x212542[_0x48ab73(0x149)][_0x48ab73(0x163)]==0x1f7){console[_0x48ab73(0x139)]('Detect\x20API\x20Change\x20Stopping\x20bot');throw Error('Detect\x20API\x20Change\x20Stopping\x20bot');}throw Error(''+_0x212542[_0x48ab73(0x149)]);}throw _0x212542;}}}